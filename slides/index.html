<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<title>reveal.js</title>

		<link rel="stylesheet" href="dist/reset.css">
		<link rel="stylesheet" href="dist/reveal.css">
		<link rel="stylesheet" href="dist/theme/black.css" id="theme">

		<!-- Theme used for syntax highlighted code -->
		<link rel="stylesheet" href="plugin/highlight/monokai.css" id="highlight-theme">
	</head>
	<body>
		<div class="reveal">
			<div class="slides">
				<section data-markdown>
					<textarea data-template>
						# Two simple ideas
						- Persist objects
						- Generate Stubs
					</textarea>
				</section>
				<section data-markdown>
					<textarea data-template>
						## Some history (1/2)
						### Remote calls were complex at '90s
						So we had Object Managent Group & IIOP/[Corba IDL](https://en.wikipedia.org/wiki/Common_Object_Request_Broker_Architecture).
						### Remote calls are still complex
						So we have Open Api Initiative & Rest/[Open Api 3.0](https://www.openapis.org/).
					</textarea>
				</section data-markdown>
				<section data-markdown>
					<textarea data-template>
						## Open api stub generator
						- Interface definition language with yaml
						- Generators for common technologies
						- "kotlin-spring" for spring boot projects
						- Generates models and api base classes (stubs)
						- Base classes are extended with inheritance
						- Model classes are extended with extension methods
					</textarea>
				</section>
				<section data-markdown>
					<textarea data-template>
						![open api](images/open_api_cosmossample.png)
					</textarea>
				</section>
				<section data-markdown>
					<textarea data-template>
						![generated artifacts](images/open_api_generated_artifacts.png)
					</textarea>
				</section>
				<section data-markdown>
					<textarea data-template>
						![implemented controller](images/implemented_controller.png)
					</textarea>
				</section>
				<section data-markdown>
					<textarea data-template>
						## Value of generated artifacts
						- Less handwritten code => less bugs
						- DSL can be easily read by non-techies
						- Compiler checks api conformity
					</textarea>
				</section>
				<section data-markdown>
					<textarea data-template>
						## Open issues
						- client generation not tested
						- java generation not tested
						- tested only with maven
					</textarea>
				</section>
				<section data-markdown>
					<textarea data-template>
						## Some history (2/2)
						### Object Databases
						.. were good idea - but relational databases won
						## Not Only Sql Databases
						Try to save us from Object/Relational Mapping
					</textarea>
				</section>
				<section data-markdown>
					<textarea data-template>
						## Azure Cosmos Db (1/2)
						- Native Sql/Core api
						- Plus MongoDb, Cassandra, Gremlin & Table apis
						- Data queried with SQL syntax
						- Data stored as Json
						- Globally distributed, Multitenant, ..
						- Optimistic Locking, Subqueries, TTL, ..
					</textarea>
				</section>
				<section data-markdown>
					<textarea data-template>
						![cosmos entities](images/cosmos-entities.png)
					</textarea>
				</section>
				<section data-markdown>
					<textarea data-template>
						## Example cosmos db database
						- database "testdb"
						- container "myContainer"
						- items are "User" json structures
						- every "User" has attribute "Addresses"
						- "Addresses" is array of "Address"
					</textarea>
				</section>
				<section data-markdown>
					<textarea data-template>
						![cosmos entities](images/azure_cosmosdb_data_explorer.png)
					</textarea>
				</section>
				<section data-markdown>
					<textarea data-template>
						## Azure Cosmos Db (2/2)
						- Spring data support: "azure-spring-data-cosmos"
						- Configurated using spring config and annotations
						- Blocking and Reactive models supported
						- CosmosRepository<ObjectType, KeyType>
						- ReactiveCosmosRepository<ObjectType, KeyType>
					</textarea>
				</section>
				</section>
				<section data-markdown>
					<textarea data-template>
						![cosmos user entity](images/cosmosdb_user_entity.png)
					</textarea>
				</section>
				<section data-markdown>
					<textarea data-template>
						![cosmos user entity](images/cosmosdb_user_repository.png)
					</textarea>
				</section>
				<section data-markdown>
					<textarea data-template>
            slide duplication intentionally used
					</textarea>
				</section>
				<section data-markdown>
					<textarea data-template>
						![implemented controller](images/implemented_controller.png)
					</textarea>
				</section>
				<section data-markdown>
					<textarea data-template>
						## Value of non relational storage
						- Familiar apis: spring data & sql
						- Schemaless nested structure is flexible
						- Usable for mostly-read data
						- fits well together with idea of objects
					</textarea>
				</section>
				<section data-markdown>
					<textarea data-template>
						## Open issues
						- sweet spot needs to be found (know when to use)
						- possibly not useful for high-write data (costs)
						- migrations might be hard (need programming)
						- runs on azure, but still needs expertise (proprietary)
						- multitenancy needs to be tested
					</textarea>
				</section>
				<section data-markdown>
					<textarea data-template>
						END
					</textarea>
				</section>
			</div>
		</div>

		<script src="dist/reveal.js"></script>
		<script src="plugin/notes/notes.js"></script>
		<script src="plugin/markdown/markdown.js"></script>
		<script src="plugin/highlight/highlight.js"></script>
		<script>
			// More info about initialization & config:
			// - https://revealjs.com/initialization/
			// - https://revealjs.com/config/
			Reveal.initialize({
				hash: true,

				// Learn about plugins: https://revealjs.com/plugins/
				plugins: [ RevealMarkdown, RevealHighlight, RevealNotes ]
			});
		</script>
	</body>
</html>
